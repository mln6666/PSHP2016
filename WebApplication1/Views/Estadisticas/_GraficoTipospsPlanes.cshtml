@using WebApplication1.Models
@model IEnumerable<WebApplication1.Models.PS>
@{
    Layout = null;
}

<div id="ajaxBeginFormResult">
    <head >
        <link rel="stylesheet" type="text/css" href="~/Scripts/jqPlot/jquery.jqplot.css" />
        <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/themes/smoothness/jquery-ui.css" />
    </head>



    <div id="seleccion">
      
        <br />
        <div class="text-center">

            <h4>Desde: @ViewBag.fechadesde.ToString("dd/MM/yyyy")-Hasta: @ViewBag.fechahasta.ToString("dd/MM/yyyy")</h4>
            <br />
            

            <div id="grafico2" style="width: 500px; height:300px ; display: inline-block">
            </div>
        </div>

        
        <p></p>

        @for (var i = 0; i < ViewBag.tiposps; i++)
        {
            <div class="panel panel-info text-center" style="display: inline-block">
                <div class="panel-heading">
                    <h3 class="panel-title text-center">@ViewBag.mistiposps[i]</h3>
                </div>
                <div class="panel-body">
                    <h5 style="font-family: cursive; font-size: medium" class="text-center">Planes Aprobados: @ViewBag.listaaprobados[i]</h5>
                    <h5 style="font-family: cursive; font-size: medium" class="text-center">Planes Desaprobados: @ViewBag.listadesaprobados[i]</h5>
                    <h5 style="font-family: cursive; font-size: medium" class="text-center">Planes Pendientes: @ViewBag.listapendientes[i]</h5>
                    <h5 style="font-family: cursive; font-size: medium" class="text-center">Planes Rechazados: @ViewBag.listarechazados[i]</h5>
                </div>
            </div>
        }
        <hr style="color: grey; border-color: grey" />

        <table id="mitabla" class="table table-striped table-bordered">
            <thead>
                <tr class="text-center" style="color: #2c3e50; background-color: lightblue">

                    <th class="text-left" style="border-radius: 3px">
                        @Html.DisplayNameFor(model => model.Alumno.Legajo)
                    </th>
                    <th class="text-left" style="border-radius: 3px">
                        Apellido y Nombre
                    </th>
                    <th class="text-left" style="border-radius: 3px">
                        @Html.DisplayNameFor(model => model.NroDisposicion)
                    </th>
                    <th class="text-left" style="border-radius: 3px">
                        @Html.DisplayNameFor(model => model.Area.NombreArea)
                    </th>

                    <th class="text-left" style="border-radius: 3px">
                        @Html.DisplayNameFor(model => model.CicloLectivo)
                    </th>

                    <th class="text-left" style="border-radius: 3px">
                        @Html.DisplayNameFor(model => model.Estado)
                    </th>
                    <th class="text-center hidden-print" style="border-radius: 3px">Acciones</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr style="background-color: azure">
                        <td class="text-left">
                            @Html.DisplayFor(modelItem => item.Alumno.Legajo)
                        </td>
                        <td class="text-left">
                            @item.Alumno.ApellidoAlu, @item.Alumno.NombreAlu
                        </td>
                        <td class="text-left">
                            @Html.DisplayFor(modelItem => item.NroDisposicion)
                        </td>
                        <td class="text-left">
                            @Html.DisplayFor(modelItem => item.Area.NombreArea)
                        </td>

                        <td class="text-left">
                            @Html.DisplayFor(modelItem => item.CicloLectivo)
                        </td>


                        @if (item.Estado == Estado.PS_Aprobada & item.NroDisposicion != null)

                        {
                            <td class="text-left" style="font-weight: bolder; font-style: italic; color: forestgreen">
                                @Html.DisplayFor(modelItem => item.Estado)
                            </td>}
                        else
                    if (item.Estado == Estado.PS_Cancelada)
                        {
                            <td class="text-left" style="font-weight: bold; font-style: italic;color: darkred">
                                @Html.DisplayFor(modelItem => item.Estado)
                            </td>
                        }
                        else if (item.Estado == Estado.PS_Aprobada & item.NroDisposicion == null)
                        {
                            <td class="text-left" style="font-weight: bold; font-style: italic;color: midnightblue">
                                @Html.DisplayFor(modelItem => item.Estado)<p style="color: midnightblue;font-size: smaller">[Sin Nro. Disposición]</p>
                            </td> }
                        else
                        {
                            <td class="text-left" style="font-weight: bold; font-style: italic;">
                                @Html.DisplayFor(modelItem => item.Estado)
                            </td>}

                        <td class="text-center hidden-print">
                            @Html.ActionLink("Detalles", "Details", "PS", new { id = item.IdPS, var = true }, new { @class = "btn btn-primary btn-sm", @style = "color:white;font-size:13px;line-height:inherit;border-radius:5px;font-weight: 500" })
                            @*@Html.ActionLink("Eliminar", "Delete", new { id = item.IdPS }, new { @class = "dialog-window1 btn btn-primary btn-sm", @style = "color:white;font-size:13px;line-height:inherit;border-radius:5px;font-weight: 500" })*@
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <div class="hidden-print">
            <a class="btn btn-primary" onclick="window.print('#seleccion');">
                Imprimir

            </a>
        </div>


    <script language="javascript" type="text/javascript" src="~/Scripts/jqPlot/jquery.js"></script>
    <script language="javascript" type="text/javascript" src="~/Scripts/jqPlot/jquery.jqplot.js"></script>
    <script language="javascript" type="text/javascript" src="~/Scripts/jqPlot/jquery.jqplot.min.js"></script>
    <script language="javascript" type="text/javascript" src="~/Scripts/jqPlot/plugins/jqplot.cursor.js"></script>
    <script language="javascript" type="text/javascript" src="~/Scripts/jqPlot/plugins/jqplot.pieRenderer.min.js"></script>
    <script language="javascript" type="text/javascript" src="~/Scripts/jqPlot/plugins/jqplot.barRenderer.min.js"></script>
    <script language="javascript" type="text/javascript" src="~/Scripts/jqPlot/plugins/jqplot.categoryAxisRenderer.min.js"></script>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js"></script>
    <script>
        $(document).ready(function () {

            $('#mitabla_length').addClass('hidden-print');
            $('#mitabla_filter').addClass('hidden-print');
            $('#mitabla_info').addClass('hidden-print');
            $('#mitabla_paginate').addClass('hidden-print');

            var listatiposps = @Html.Raw(ViewBag.listatiposps);
            var cantidades = @Html.Raw(ViewBag.cantidades);

            var array =[];
            $.each( listatiposps, function( index, value ){
                array.push([value+" : "+cantidades[index], cantidades[index]]);
            });


            plot3 = jQuery.jqplot('grafico2',
     [array],
     {
         title: ' ',
         seriesDefaults: {
             shadow: false,
             renderer: jQuery.jqplot.PieRenderer,
             rendererOptions: {
                 sliceMargin: 4,
                 showDataLabels: true
             }
         },
         legend: { show:true, location: 'e' }
     }
   );


        });

        $("#mitabla").DataTable({
            "language": {
                "url": "/Scripts/DataTables/spanish.json"
            }
        });

        function printData() {
            var divToPrint = document.getElementById("seleccion");
            newWin = window.open("");
            newWin.document.write(divToPrint.outerHTML);
            newWin.print();
            newWin.close();
        }      
    </script>
</div>

<style>
    .jqplot-table-legend {
        font-size: large;
    }
</style>