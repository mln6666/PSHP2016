@using System.Web.UI.WebControls
@model WebApplication1.Models.PresentacionPlan
@{
    Layout = null;
}
@*@{
    ViewBag.Title = "Evaluar Plan";
}*@
<head>
    <script>
        /////////////////Start:Select searchable////////////////

        $('#evaluarplan').submit(function (e) {
            var x = this;
            e.preventDefault();
            var isValidItem = true;
            var fecha2 = new Date($('#FechaEvaluacionPlan').val());

            var minfecha = new Date("01/01/2000");
            var maxfecha = new Date("01/01/2100");

            if ((fecha2 < minfecha) || (fecha2 > maxfecha)) {
                var isValidItem = false;
                $('#spanfechaevaluacionplan').text("Rango valido: 01/01/2000 - 01/01/2100");

            }
          
            if ($('#FechaEvaluacionPlan').val().trim() == '') {
                var isValidItem = false;
                $('#spanfechaevaluacionplan').text("Campo requerido.");

            }
            if (($('#FechaEvaluacionPlan').val().trim() != '') & ($('#EstadoEvaluacionPlan').val().trim() == 0)) {
                var isValidItem = false;
                $('#spanfechaestado').text("**Fecha de Evaluación requiere una Evaluación!");
            }

            if (($('#FechaEvaluacionPlan').val().trim() == '') & ($('#EstadoEvaluacionPlan').val().trim() != 0)) {
                var isValidItem = false;
                $('#spanfechaestado').text("**Una Evaluación requiere una Fecha de Evaluación!");
            }

            if (isValidItem) { //var x=document.getElementById("RoleID").innerText;
                bootbox.confirm("Esta por evaluar una presentación del plan, ¿Desea continuar?", function (result) {
                    if (result) {
                        x.submit();
                    }
                });
            }

        });

        ////////////////End:Select searchable///////////////////

    </script>
</head>






@using (Html.BeginForm("EvaluarPlan", "PresentacionPlanes", null, FormMethod.Post, new { id = "evaluarplan" }))
{
    @Html.HiddenFor(model => model.FechaPresentacionPlan)           
    @Html.HiddenFor(model => model.IdPS)
    
    @Html.AntiForgeryToken()

    <div class="form-horizontal" >
        @*<h2>Evaluar Plan</h2>*@
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        @Html.HiddenFor(model => model.IdPresentacionPlan)
        <div class="form-group">
            @Html.LabelFor(model => model.FechaEvaluacionPlan, "Fecha de Evaluación", htmlAttributes: new { @class = "control-label col-md-6", @Style="text-align: center" })
            <div class="col-md-4">
                @Html.EditorFor(model => model.FechaEvaluacionPlan, new { htmlAttributes = new { @class = "form-control input-sm" } })
                @Html.ValidationMessageFor(model => model.FechaEvaluacionPlan, "", new { @class = "text-danger" })
                <span id="spanfechaevaluacionplan" style="color:red"></span>

            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.EstadoEvaluacionPlan, "Estado de Evaluación", htmlAttributes: new { @class = "control-label col-md-6", @Style = "text-align: center" })
            <div class="col-md-4">
                @Html.EnumDropDownListFor(model => model.EstadoEvaluacionPlan, htmlAttributes: new { @class = "form-control input-sm" })
                @Html.ValidationMessageFor(model => model.EstadoEvaluacionPlan, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.ObservacionesPlan, "Observaciones", htmlAttributes: new {@class = "control-label col-md-6", @Style = "text-align: center"})
            <div class="col-md-6">
                @Html.EditorFor(model => model.ObservacionesPlan, new {htmlAttributes = new {@class = "form-control input-sm"}})
                @Html.ValidationMessageFor(model => model.ObservacionesPlan, "", new {@class = "text-danger"})
            </div>
        </div>
        <span id="spanfechaestado" style="color:red"></span>

         <div class="form-group">
             <div class="col-md-offset-5 col-md-10">
                 <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>

                 <input type="submit" value="Guardar" class="btn btn-success"/>
             </div>
        </div>
    </div>
}




